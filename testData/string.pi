pkg std

type string struct {
	i8 *buf;
	u64 len;
	u64 maxlen;
	u64 factor;
}

fn (string *s) init() {
	s->buf = nil;
	s->len = 0;
	s->maxlen = 0;
	s->factor = 16;
}

fn (string *s) delete() {
	if(s->buf != nil) {
		free(s->buf);
	}
}

fn (string *s) resize(u64 value) {
	i8 *output, buf = malloc(value), s->buf;
	u64 len = s->len;
	memcpy(output, buf, len);
	free(buf);
	s->buf = output;
	s->maxlen = value;
}

fn (string *s) addChar(i8 value) {
	if(s->len == s->maxlen) {
		s->resize(s->maxlen + s->factor);
	}
	s->len = s->len + 1;
}
